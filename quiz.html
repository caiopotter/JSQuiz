<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<style>
			.main{
				color: white;
				text-align: center;
			}
			li{
				list-style-type: none;
				color: white;
			}
			.mainInput{
				border: none;
				background-color: #8080805e;
				color: white;
				padding: 5px;
				border-radius: 5px;
			}
		</style>
	</head>

	<body style="background-color: purple;">
		<div id="mainPage">
			<h1 class="main">Quiz do Caio</h1>
				Digite seu nome e clique em iniciar: <input id="userName" class="mainInput" type="text" name="name">
			<button id="mainPageButton" onclick="nextPage()">Iniciar</button>
		</div>
		<div class="quiz-container">
			<div id="quiz"></div>
		</div>
		<button id="previous">Previous Question</button>
		<button id="next">Next Question</button>
		<button id="submit" style="display: none;"onclick="showResults()">Finalizar Quiz</button>

		<div id="results"></div>


		<script type="text/javascript">
			//referência: https://www.sitepoint.com/simple-javascript-quiz/
			const quizContainer = document.getElementById('quiz');
			const resultsContainer = document.getElementById('results');
			const submitButton = document.getElementById('submit');
			const mainPage = document.getElementById('mainPage');
			const previousButton = document.getElementById("previous");
			const nextButton = document.getElementById("next");
			const slides = document.querySelectorAll(".slide");
			let currentSlide = 0;
			const questions = [
				{
					question: "Questão 1",
					answers: {
						a: "Resposta 1",
						b: "Resposta 2",
						c: "Resposta 3"
					},
					correctAnswer: "a"
				},
				{	question: "Questão 2",
					answers: {
						a: "Resposta 1",
						b: "Resposta 2",
						c: "Resposta 3"
					},
					correctAnswer: "b"
				},
				{	question: "Questão 3",
					answers: {
						a: "Resposta 1",
						b: "Resposta 2",
						c: "Resposta 3"
					},
					correctAnswer: "c"
				}
			];

			function nextPage(){
				mainPage.style.display = "none";
				buildQuiz();
				submitButton.style.display = "block";
			}

			function buildQuiz(){
				const output = [];

				questions.forEach(
					(currentQuestion, questionNumber) => {
						const answers = [];

						for(letter in currentQuestion.answers){
							answers.push(
								`<label>
									<input type="radio" name="question${questionNumber}" value="${letter}">
									${letter} : ${currentQuestion.answers[letter]}
								</label>`);
						}
					output.push(
					        `<div class="slide">
					        <div class="question"> ${currentQuestion.question} </div>
					        <div class="answers"> ${answers.join('')} </div>
					        </div>`
					      );

					}


					);
				  quizContainer.innerHTML = output.join('');

			}

			function showResults(){
				const answerContainers = quizContainer.querySelectorAll('.answers');
				console.log(answerContainers);
				let numCorrect = 0;

				questions.forEach( (currentQuestion, questionNumber) => {
					const answerContainer = answerContainers[questionNumber];
					const selector = 'input[name=question'+questionNumber+']:checked';
					const userAnswer = (answerContainer.querySelector(selector) || {}).value;


					if(userAnswer===currentQuestion.correctAnswer){
						numCorrect++;
						answerContainers[questionNumber].style.color = 'lightgreen';
					}else{
						answerContainers[questionNumber].style.color = 'red';
					}

				});

				resultsContainer.innerHTML = numCorrect + ' out of ' + questions.length;

			}

			submitButton.addEventListener('click', showResults);

		</script>
	</body>
</html>